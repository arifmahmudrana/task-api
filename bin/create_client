#!/usr/bin/env node
const fmt = require('util').format;

const rand = require('../src/utils/rand');
const clientId = rand.generateRandomStringURLSafe(16);
const clientSecret = rand.generateRandomString(32);

require('../src/redis/db')
  .hmsetAsync(fmt('clients:%s', clientId), {
    clientId,
    clientSecret
  })
  .then(() => {
    console.log('Client added successfully');
    console.log(fmt('clientId = "%s"', clientId));
    console.log(fmt('clientSecret = "%s"', clientSecret));
    process.exit();
  })
  .catch(errs => {
    console.error(errs[0].message);
    process.exit(1);
  });
